---
title: 'Configure Social Login (OAuth) Providers'
description: 'Set up social login (OAuth/OIDC) providers for self-hosted Supabase with Docker.'
subtitle: 'Set up social login (OAuth/OIDC) providers for self-hosted Supabase with Docker.'
---

This guide covers the **server-side configuration** required to enable social login providers on a self-hosted Supabase instance running with Docker Compose. This applies to all OAuth and OIDC-based providers, including third-party identity providers like Keycloak.

For client-side implementation details, see [Social Login](/docs/guides/auth/social-login).

## Before you begin

You need:

- A working self-hosted Supabase installation. See [Self-Hosting with Docker](/docs/guides/self-hosting/docker).
- `API_EXTERNAL_URL` set to the publicly reachable URL of your Supabase instance (e.g., `https://<your-domain>`).

<Admonition type="danger">

HTTPS is strongly recommended in production. Most OAuth providers reject `http://` callback URLs (except `localhost`).

</Admonition>

Your **OAuth callback URL** is built from `API_EXTERNAL_URL`. For example, if `API_EXTERNAL_URL` is `https://<your-domain>`, the callback URL will become:

```
https://<your-domain>/auth/v1/callback
```

You will have to register this URL with each OAuth provider.

## OAuth request flow

When a user signs in with an OAuth provider, the following flow occurs:

1. Your app calls `supabase.auth.signInWithOAuth()` and the browser redirects to the Auth service
2. API gateway (Kong) routes the request to the Auth container (`/auth/v1/authorize`)
3. Auth redirects the user to the OAuth provider (e.g., Google) for consent
4. The provider redirects back to `API_EXTERNAL_URL/auth/v1/callback`
5. Auth exchanges the authorization code for tokens and redirects the user to your `SITE_URL` or an allowed redirect URL

## Auth environment variables

The Auth service (GoTrue) uses the prefix `GOTRUE_EXTERNAL_` followed by a provider for all OAuth configuration. For example, when using Google:

- `GOTRUE_EXTERNAL_GOOGLE_ENABLED`
- `GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID`
- `GOTRUE_EXTERNAL_GOOGLE_SECRET`
- `GOTRUE_EXTERNAL_GOOGLE_REDIRECT_URI`

## Step-by-step configuration

The default `.env.example` and `docker-compose.yml` include commented-out placeholders for Google, GitHub, Apple, and Azure. For these providers, you just need to uncomment and configure related configuration variables.

### Step 1: Register your app with the provider

Go to the OAuth provider's developer console and create an application. Set the **authorized redirect URL**, e.g., `https://<your-domain>/auth/v1/callback`

Copy the **client ID** and **client secret** into your `.env` file.

### Step 2: Uncomment and configure variables in the `.env` file

Uncomment the lines for your provider in `.env` and add your client ID and secret, e.g., for Google:

```
GOOGLE_ENABLED=true
GOOGLE_CLIENT_ID=your-client-id
GOOGLE_SECRET=your-client-secret
```

### Step 3: Uncomment the matching lines in `docker-compose.yml`

Uncomment the corresponding `GOTRUE_EXTERNAL_` lines in the `auth` service's `environment`:

```
GOTRUE_EXTERNAL_GOOGLE_ENABLED: ${GOOGLE_ENABLED}
GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID: ${GOOGLE_CLIENT_ID}
GOTRUE_EXTERNAL_GOOGLE_SECRET: ${GOOGLE_SECRET}
GOTRUE_EXTERNAL_GOOGLE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

<Admonition type="note">

For providers **not** pre-configured in the files (see the [full provider list](#other-supported-providers) below), add the lines manually following the same pattern: variables in `.env`, passthrough with `GOTRUE_EXTERNAL_PROVIDER_` in `docker-compose.yml`.

</Admonition>

### Step 4: Restart the auth service

```
docker compose up -d --force-recreate --no-deps auth
```

### Step 5: Verify the configuration

Check that the provider is enabled:

```
curl http://<youd-domain>:8000/auth/v1/settings
```

The response should include your provider under `external`:

```
{
  "external": {
    "google": true
  }
}
```

## Provider-specific setup

<Tabs
  scrollable
  size="small"
  type="underlined"
  defaultActiveId="google"
>

<TabPanel id="google" label="Google">

**Google Cloud Console setup:**

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create or select a project
3. Select **Solutions** > **All products** in the navigation menu on the left
4. Go to **APIs & services** > **OAuth consent screen** and click **Get started**
5. Follow the configuration steps and add an **External** app
3. Go to **APIs & Services** > **Credentials**
4. Click **Create Credentials** > **OAuth client ID**
5. Set application type to **Web application**
6. Under **Authorized redirect URIs**, add: `https://<your-domain>/auth/v1/callback`
7. Click **Create** and copy the client ID and client secret

**`.env` variables:**

```
GOOGLE_ENABLED=true
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_SECRET=your-google-client-secret
```

**`docker-compose.yml` passthrough:**

```
GOTRUE_EXTERNAL_GOOGLE_ENABLED: ${GOOGLE_ENABLED}
GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID: ${GOOGLE_CLIENT_ID}
GOTRUE_EXTERNAL_GOOGLE_SECRET: ${GOOGLE_SECRET}
GOTRUE_EXTERNAL_GOOGLE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

</TabPanel>

<TabPanel id="github" label="GitHub">

**GitHub setup:**

1. Go to [GitHub Developer Settings](https://github.com/settings/developers)
2. Click **New OAuth app**
3. Fill in **Homepage URL**, e.g., `https://<your-domain>`
3. Set **Authorization callback URL** to: `https://<your-domain>/auth/v1/callback`
4. Click **Register application**
4. Copy the client ID, generate and copy a client secret

**`.env` variables:**

```
GITHUB_ENABLED=true
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_SECRET=your-github-client-secret
```

**`docker-compose.yml` passthrough:**

```
GOTRUE_EXTERNAL_GITHUB_ENABLED: ${GITHUB_ENABLED}
GOTRUE_EXTERNAL_GITHUB_CLIENT_ID: ${GITHUB_CLIENT_ID}
GOTRUE_EXTERNAL_GITHUB_SECRET: ${GITHUB_SECRET}
GOTRUE_EXTERNAL_GITHUB_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

</TabPanel>

<TabPanel id="azure" label="Azure">

**Azure Portal setup:**

1. Go to [Azure Portal](https://portal.azure.com/)
2. Go to **All services** > **Identity** > **App registrations** via the navigation menu on the left
3. Click **New registration**
4. Add application **Name**
5. Under **Redirect URI**, select **Web** and enter: `https://<your-domain>/auth/v1/callback`
6. Click **Register**
7. Copy the **Application (client) ID**
8. Click on **Client credentials** > **Add a certificate or secret**
9. Click on **New client secrete** and add a client secret
10. Copy the secret value (not "secret ID")

**`.env` variables:**

```
AZURE_ENABLED=true
AZURE_CLIENT_ID=your-azure-application-client-id
AZURE_SECRET=your-azure-client-secret
## Optional: restrict to a specific tenant (defaults to 'common')
# AZURE_URL=https://login.microsoftonline.com/your-tenant-id
```

**`docker-compose.yml` passthrough:**

```
GOTRUE_EXTERNAL_AZURE_ENABLED: ${AZURE_ENABLED}
GOTRUE_EXTERNAL_AZURE_CLIENT_ID: ${AZURE_CLIENT_ID}
GOTRUE_EXTERNAL_AZURE_SECRET: ${AZURE_SECRET}
GOTRUE_EXTERNAL_AZURE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
## Optional: uncomment for tenant-specific Azure login
# GOTRUE_EXTERNAL_AZURE_URL: ${AZURE_URL}
```

</TabPanel>

<TabPanel id="apple" label="Apple">

**Apple Developer setup:**

1. Refer to [Apple Developer documentation](https://developer.apple.com/documentation/signinwithapple/configuring-your-environment-for-sign-in-with-apple) to learn how to enable App ID and create a Services ID
2. Create a private key for sign in with Apple
3. Generate a client secret JWT from your private key. See [Apple Developer documentation](https://developer.apple.com/documentation/accountorganizationaldatasharing/creating-a-client-secret) for details.

**`.env` variables:**

```
APPLE_ENABLED=true
APPLE_CLIENT_ID=com.example.your-services-id
APPLE_SECRET=your-generated-jwt-client-secret
```

**`docker-compose.yml` passthrough:**

```
GOTRUE_EXTERNAL_APPLE_ENABLED: ${APPLE_ENABLED}
GOTRUE_EXTERNAL_APPLE_CLIENT_ID: ${APPLE_CLIENT_ID}
GOTRUE_EXTERNAL_APPLE_SECRET: ${APPLE_SECRET}
GOTRUE_EXTERNAL_APPLE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

<Admonition type="note">

Apple uses `response_mode=form_post` for its OAuth flow. The Auth service handles this automatically — no additional configuration is needed.

</Admonition>

</TabPanel>

<TabPanel id="keycloak" label="Keycloak">

**Keycloak setup:**

1. Open your Keycloak admin console
2. Select (or create) the realm you want to use
3. Go to **Clients** > **Create client**
4. Set **Client type** to **OpenID Connect**
5. Set **Client ID** (e.g., `supabase`)
6. On the next screen, enable **Client authentication**
7. Under **Valid redirect URIs**, add: `https://<your-domain>/auth/v1/callback`
8. Save, then go to the **Credentials** tab and copy the **Client secret**

**`.env` variables:**

```bash
KEYCLOAK_ENABLED=true
KEYCLOAK_CLIENT_ID=supabase
KEYCLOAK_SECRET=your-keycloak-client-secret
## Required: your Keycloak realm URL
KEYCLOAK_URL=https://keycloak.example.com/realms/myrealm
```

**`docker-compose.yml` passthrough:**

```
GOTRUE_EXTERNAL_KEYCLOAK_ENABLED: ${KEYCLOAK_ENABLED}
GOTRUE_EXTERNAL_KEYCLOAK_CLIENT_ID: ${KEYCLOAK_CLIENT_ID}
GOTRUE_EXTERNAL_KEYCLOAK_SECRET: ${KEYCLOAK_SECRET}
GOTRUE_EXTERNAL_KEYCLOAK_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
GOTRUE_EXTERNAL_KEYCLOAK_URL: ${KEYCLOAK_URL}
```

<Admonition type="danger">

`KEYCLOAK_URL` is **required**. It must be the full realm URL (e.g., `https://keycloak.example.com/realms/myrealm`). The Auth service uses this to discover the OIDC endpoints (`.well-known/openid-configuration`). Without it, Keycloak login will not work.

</Admonition>

</TabPanel>

</Tabs>

### Other supported providers

The Auth service supports 20+ OAuth providers. Each follows the same `GOTRUE_EXTERNAL_{PROVIDER}_*` pattern. Below is a reference for all providers:

| Provider | Env prefix | Extra variables | Docs |
|----------|-----------|-----------------|------|
| Apple | `APPLE_` | — | [Login with Apple](/docs/guides/auth/social-login/auth-apple) |
| Azure (Microsoft) | `AZURE_` | `URL` (tenant URL) | [Login with Azure](/docs/guides/auth/social-login/auth-azure) |
| Bitbucket | `BITBUCKET_` | — | [Login with Bitbucket](/docs/guides/auth/social-login/auth-bitbucket) |
| Discord | `DISCORD_` | — | [Login with Discord](/docs/guides/auth/social-login/auth-discord) |
| Facebook | `FACEBOOK_` | — | [Login with Facebook](/docs/guides/auth/social-login/auth-facebook) |
| Figma | `FIGMA_` | — | [Login with Figma](/docs/guides/auth/social-login/auth-figma) |
| GitHub | `GITHUB_` | `URL` (for GitHub Enterprise) | [Login with GitHub](/docs/guides/auth/social-login/auth-github) |
| GitLab | `GITLAB_` | `URL` (for self-hosted GitLab) | [Login with GitLab](/docs/guides/auth/social-login/auth-gitlab) |
| Google | `GOOGLE_` | — | [Login with Google](/docs/guides/auth/social-login/auth-google) |
| Kakao | `KAKAO_` | — | [Login with Kakao](/docs/guides/auth/social-login/auth-kakao) |
| Keycloak (OIDC) | `KEYCLOAK_` | `URL` (realm URL, **required**) | [Login with Keycloak](/docs/guides/auth/social-login/auth-keycloak) |
| LinkedIn (OIDC) | `LINKEDIN_OIDC_` | — | [Login with LinkedIn](/docs/guides/auth/social-login/auth-linkedin) |
| Notion | `NOTION_` | — | [Login with Notion](/docs/guides/auth/social-login/auth-notion) |
| Slack (OIDC) | `SLACK_OIDC_` | — | [Login with Slack](/docs/guides/auth/social-login/auth-slack) |
| Snapchat | `SNAPCHAT_` | — | — |
| Spotify | `SPOTIFY_` | — | [Login with Spotify](/docs/guides/auth/social-login/auth-spotify) |
| Twitch | `TWITCH_` | — | [Login with Twitch](/docs/guides/auth/social-login/auth-twitch) |
| Twitter | `TWITTER_` | — | [Login with Twitter](/docs/guides/auth/social-login/auth-twitter) |
| WorkOS | `WORKOS_` | — | [Login with WorkOS](/docs/guides/auth/social-login/auth-workos) |
| Zoom | `ZOOM_` | — | [Login with Zoom](/docs/guides/auth/social-login/auth-zoom) |

For each provider, you need at minimum `ENABLED`, `CLIENT_ID`, `SECRET`, and `REDIRECT_URI` in `docker-compose.yml`. The `.env` variable names do not include the `GOTRUE_EXTERNAL_` prefix — that is added in the Docker Compose passthrough.

<Admonition type="note">

**LinkedIn (OIDC)** and **Slack (OIDC)** use multi-word env prefixes. The full Docker Compose variables are `GOTRUE_EXTERNAL_LINKEDIN_OIDC_CLIENT_ID` and `GOTRUE_EXTERNAL_SLACK_OIDC_CLIENT_ID` respectively — not `LINKEDIN_CLIENT_ID` or `SLACK_CLIENT_ID`.

</Admonition>

<Admonition type="tip">

**Keycloak** requires `GOTRUE_EXTERNAL_KEYCLOAK_URL` set to your realm URL (e.g., `https://keycloak.example.com/realms/myrealm`). Without this, the Auth service cannot discover Keycloak's OIDC endpoints.

</Admonition>

## Complete example: Google OAuth

This walkthrough starts from a fresh self-hosted Supabase setup and adds Google OAuth.

### 1. Create Google OAuth credentials

1. Open [Google Cloud Console](https://console.cloud.google.com/apis/credentials)
2. Create a new project or select an existing one
3. If prompted, configure the **OAuth consent screen** (External, fill in app name and email)
4. Go to **Credentials** > **Create Credentials** > **OAuth client ID**
5. Application type: **Web application**
6. Authorized redirect URIs: add `https://supabase.example.com/auth/v1/callback` (replace with your `API_EXTERNAL_URL`)
7. Click **Create** and note the **Client ID** and **Client Secret**

### 2. Edit `.env`

Add the following after the phone auth section:

```
## OAuth - Google
GOOGLE_ENABLED=true
GOOGLE_CLIENT_ID=123456789-abcdef.apps.googleusercontent.com
GOOGLE_SECRET=GOCSPX-your-secret-here
```

### 3. Edit `docker-compose.yml`

In the `auth` service `environment:` block, add after the phone/SMS variables:

```
services:
  auth:
    environment:
      # ... existing variables ...

      GOTRUE_EXTERNAL_GOOGLE_ENABLED: ${GOOGLE_ENABLED}
      GOTRUE_EXTERNAL_GOOGLE_CLIENT_ID: ${GOOGLE_CLIENT_ID}
      GOTRUE_EXTERNAL_GOOGLE_SECRET: ${GOOGLE_SECRET}
      GOTRUE_EXTERNAL_GOOGLE_REDIRECT_URI: ${API_EXTERNAL_URL}/auth/v1/callback
```

### 4. Restart the auth service

```sh
docker compose up -d auth
```

### 5. Verify

```sh
curl https://<your-domain>/auth/v1/settings
```

Confirm `"google": true` appears in the response under `external`.

### 6. Test the login flow

You can test without a full app by saving this as an HTML file and opening it in your browser:

```js name=test-oauth.js
// Save as a .js file served by any static file server, or paste into your browser console.
// Replace these with your actual values:
const SUPABASE_URL = 'https://supabase.example.com'
const SUPABASE_ANON_KEY = 'your-anon-key'

// Using supabase-js loaded via CDN or npm
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY)

// Trigger the OAuth flow
const { data, error } = await supabase.auth.signInWithOAuth({
  provider: 'google',
})

// After the redirect back, check for a session
const { data: session } = await supabase.auth.getSession()
if (session.session) {
  console.log('Logged in as:', session.session.user.email)
}
```

Or use a minimal HTML page. Create a file called `test-oauth.html`:

{/* supa-mdx-lint-disable Rule003Spelling */}

```text name=test-oauth.html
<!DOCTYPE html>
<html>
<body>
  <h1>Supabase OAuth Test</h1>
  <button onclick="login()">Sign in with Google</button>
  <pre id="result"></pre>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL = 'https://supabase.example.com'
    const SUPABASE_ANON_KEY = 'your-anon-key'
    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY)
    async function login() {
      const { data, error } = await supabase.auth.signInWithOAuth({ provider: 'google' })
      if (error) document.getElementById('result').textContent = JSON.stringify(error, null, 2)
    }
    supabase.auth.getSession().then(({ data }) => {
      if (data.session) document.getElementById('result').textContent = 'Logged in as: ' + data.session.user.email
    })
  </script>
</body>
</html>
```

<Admonition type="tip">

Make sure `SITE_URL` or `ADDITIONAL_REDIRECT_URLS` includes the URL where you open this test page (e.g., `http://localhost:3000`). Otherwise the Auth service will reject the redirect after login.

</Admonition>

For detailed client-side integration, see [Social Login](/docs/guides/auth/social-login).

## Troubleshooting

### "Provider not enabled" or provider shows `false` in `/auth/v1/settings`

- Check that `GOTRUE_EXTERNAL_{PROVIDER}_ENABLED` is set to `true` in `docker-compose.yml`
- Verify the `.env` variable is not empty. Run `docker compose exec auth env | grep GOOGLE` to inspect the container's environment.

### Empty `redirect_uri` in auth logs

If auth logs show `redirect_uri=""`, the `REDIRECT_URI` variable is not reaching the container. Ensure:

- `GOTRUE_EXTERNAL_{PROVIDER}_REDIRECT_URI` is set in `docker-compose.yml`
- The value should be `${API_EXTERNAL_URL}/auth/v1/callback`
- Run `docker compose exec auth env | grep REDIRECT_URI` to verify

### `redirect_uri_mismatch` error from the provider

The callback URL registered with the OAuth provider does not match what the Auth service sends. Ensure:

- The provider's authorized redirect URI is exactly `{API_EXTERNAL_URL}/auth/v1/callback`
- `API_EXTERNAL_URL` in `.env` matches the URL users access (including protocol and port)
- There are no trailing slashes

### Variables added to `.env` but provider still not working

`.env` variables are **not** automatically available inside the container. You must also add the passthrough in `docker-compose.yml`:

```yaml
GOTRUE_EXTERNAL_{PROVIDER}_ENABLED: ${PROVIDER_ENABLED}
```

Run `docker compose exec auth env | grep GOTRUE_EXTERNAL` to verify the variables are reaching the container.

### `SITE_URL` or redirect URL errors after login

After a successful OAuth login, the Auth service redirects to `SITE_URL` or a URL from `ADDITIONAL_REDIRECT_URLS`. Ensure:

- `SITE_URL` in `.env` is set to your application's URL (e.g., `http://localhost:3000`)
- If your app uses a different redirect URL, add it to `ADDITIONAL_REDIRECT_URLS` (comma-separated)

<Admonition type="caution">

`SITE_URL` is the URL of **your application** (e.g., `http://localhost:3000`), not the Supabase API URL. After a successful OAuth login, the Auth service redirects users to `SITE_URL`. If you set it to the Supabase URL by mistake, users will be redirected back to the API instead of your app.

</Admonition>

### Nonce check failure on mobile (Google Sign In)

When using Google Sign In on mobile with ID tokens, nonce verification may fail. Uncomment the following in `docker-compose.yml`:

```yaml
GOTRUE_EXTERNAL_SKIP_NONCE_CHECK: true
```

This is already included as a commented-out line in the default `docker-compose.yml`.

### Auth service fails to start

Check the auth container logs:

```sh
docker compose logs auth
```

Common causes:

- Missing required environment variable (e.g., `CLIENT_ID` or `SECRET` is empty)
- Invalid `API_EXTERNAL_URL` (must be a valid URL with protocol)

## Environment variable reference

All OAuth-related environment variables for the `auth` service in `docker-compose.yml`:

| Variable | Description | Required |
|----------|------------|----------|
| `GOTRUE_EXTERNAL_{PROVIDER}_ENABLED` | Enable the provider (`true`/`false`) | Yes |
| `GOTRUE_EXTERNAL_{PROVIDER}_CLIENT_ID` | OAuth client ID from the provider | Yes |
| `GOTRUE_EXTERNAL_{PROVIDER}_SECRET` | OAuth client secret from the provider | Yes |
| `GOTRUE_EXTERNAL_{PROVIDER}_REDIRECT_URI` | Callback URL: `{API_EXTERNAL_URL}/auth/v1/callback` | Yes |
| `GOTRUE_EXTERNAL_{PROVIDER}_URL` | Base URL for self-hosted or tenant-specific providers (Keycloak, Azure, GitLab, GitHub Enterprise) | Provider-dependent |
| `GOTRUE_EXTERNAL_{PROVIDER}_API_URL` | API endpoint URL override | No |
| `GOTRUE_EXTERNAL_{PROVIDER}_EMAIL_OPTIONAL` | Allow sign-up without email from this provider | No |
| `GOTRUE_EXTERNAL_{PROVIDER}_SKIP_NONCE_CHECK` | Skip nonce verification for ID token flows | No |
| `GOTRUE_SITE_URL` | Default redirect URL after authentication (set via `SITE_URL` in `.env`) | Yes |
| `GOTRUE_URI_ALLOW_LIST` | Additional allowed redirect URLs (set via `ADDITIONAL_REDIRECT_URLS` in `.env`) | No |
